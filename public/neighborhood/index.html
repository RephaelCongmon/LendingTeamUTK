
 <!DOCTYPE HTML>
 <html>
 <head>
        <script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
        <script src="../map/JsonRandomScooterData.js"  type="text/javascript" ></script>
    <script src="../map/JsonScooterData.json"  type="text/javascript" ></script>
     <script src="../map/RenderClusterMap.js"  type="text/javascript" ></script>
     <link href="../map/MapStyling.css" rel="stylesheet" type="text/css">

<!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143787541-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143787541-1');
    </script>

    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-9400534095151985",
            enable_page_level_ads: true
        });
    </script> -->


 <title> Scooter Parking Map </title>
   
 <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
 <script
   src= "https://maps.googleapis.com/maps/api/js?key=AIzaSyB2KRUMmFo51vT486SeYnu3EH1pbczcloA
   &callback=initMap&libraries=&v=weekly&libraries=visualization"
   defer
 ></script>
 <link rel="stylesheet" type="text/css" href="public/assets/css/map.css" />
 <link rel="shortcut icon" href="https://lendingteamutk.herokuapp.com/favicon.ico">
 
 
 <link href="https://lendingteamutk.herokuapp.com/assets/plugins/tablesaw/dist/tablesaw.css" rel="stylesheet" type="text/css" />

 <style>
        #leaderboard-table tr td:nth-child(1) {
            width: 1%;
        }
    </style>

 <link href="https://lendingteamutk.herokuapp.com/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/core.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/icons.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/components.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/pages.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/menu.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/responsive.css" rel="stylesheet" type="text/css">
 <link href="https://lendingteamutk.herokuapp.com/assets/css/_main.css" rel="stylesheet" type="text/css">
 <script src="https://lendingteamutk.herokuapp.com/assets/js/modernizr.min.js" type="text/javascript"></script>
 <link rel="stylesheet" href="https://lendingteamutk.herokuapp.com/assets/css/material-design-iconic-font.min.css">
 <link href="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
 <link href="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/buttons.bootstrap.min.css" rel="stylesheet" type="text/css" />
 <link href="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" type="text/css" />
 <link href="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/responsive.bootstrap.min.css" rel="stylesheet" type="text/css" />
 <link href="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/scroller.bootstrap.min.css" rel="stylesheet" type="text/css" />


 <meta charset="utf-8" /><meta property="og:type" content="website" /><meta property="og:site_name" content="ROFEL" /><meta property="og:title" content="ROFEL" /><meta property="og:locale" content="en_US" /><meta property="og:description" content="Website used to view Player, Guild, etc... statistics for Brawlhalla." /><meta property="keywords" content="ROFEL,Brawlhalla,Stats,Statistics" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="author" content="ROFEL" /><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@ruprep444" /><meta name="twitter:creator" content="@ruprep444" /><meta name="twitter:title" content="ROFEL" /><meta name="twitter:description" content="Website used to view Player, Guild, etc... statistics for Brawlhalla." /><meta name="twitter:image" content="https://lendingteamutk.herokuapp.com/ROFEL.png" /><meta name="description" content="Website used to view Player, Guild, etc... statistics for Brawlhalla." /><meta name="keywords" content="ROFEL,Brawlhalla,Stats,Statistics" /> </head>
 <body class="fixed-left">
 <div id="wrapper">
 <div class="topbar">
 <div class="topbar-left">
 <div class="text-center">
 <a href="https://lendingteamutk.herokuapp.com" class="logo"><img src="https://lendingteamutk.herokuapp.com/favicon.ico" height="18px" /> <span> Info Knoxville </span> </a>

 </div>
 </div>
 
 <div class="navbar navbar-default" role="navigation"><div class="container"><div class=""><div class="pull-left"><button class="button-menu-mobile open-left waves-effect"><i class="zmdi zmdi-menu"></i></button><span class="clearfix"></span></div><ul class="nav navbar-nav hidden-xs"></ul></div></div></div> </div>
 
 
 <div class="left side-menu">
 <div class="sidebar-inner slimscrollleft">
  <div id="sidebar-menu">
 <ul><li class="menu-title">Info Knoxville</li><li class="has_sub"><a href="javascript:;" class="waves-effect waves-primary"><i class="zmdi zmdi-account"></i><span>Player</span><span class="menu-arrow"><i class="zmdi zmdi-chevron-right"></i></span></a><ul class="list-unstyled">
      
    </ul></li>
    <li class="active"><a href="https://lendingteamutk.herokuapp.com/scooter" class="waves-effect waves-primary active"><i class="zmdi zmdi-accounts"></i><span> Scooter Heatmap </span></a></li>

    <li><a href="/neighborhood" class="waves-effect waves-primary"><i class="zmdi zmdi-view-list-alt"></i><span> Scooter Parking </span></a></li>

    <li><a href="/legends" class="waves-effect waves-primary"><i class="zmdi zmdi-face"></i><span> Legends </span></a></li>
    <li class="menu-title">Miscellaneous</li>
    <li><a href="https://lendingteamutk.herokuapp.com/totals" class="waves-effect waves-primary"><i class="zmdi zmdi-chart"></i><span> Totals </span></a></li>

    <li><a href="/about" class="waves-effect waves-primary"><i class="zmdi zmdi-info"></i><span> About </span></a></li>
    <li><a href="/privacy" class="waves-effect waves-primary"><i class="zmdi zmdi-lock"></i><span> Privacy Policy </span></a></li>
  
</div>
 <div class="clearfix"></div>
 </div>
 
 </div>
 
 
 <div class="content-page">
 
 <div class="content">
 <div>
 
 <!-- <div class="row">
    <div class="col-sm-12">
        <div class="page-title-box">
            
            <h4 class="page-title">Heatmap of Scooters in Knoxville</h4>
        </div>
    </div>
 </div> -->



 <div class="page-title-box" style='padding: 15px; margin: -35px -20px -30px -20px;'>
 <div id="clusterMap"></div>
 
 </div>
<!--The div element for the map -->


<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2KRUMmFo51vT486SeYnu3EH1pbczcloA&callback=initMap">
</script>

 </div>
 </div>
 
 <footer class="footer">
 <span>2020 Â© All Rights Reserved - Developed by Team UTK</span>
 <span>- Powered by <a href="https://lendingteamutk.herokuapp.com" target="_blank"> InfoKnoxville </a></span>
 </footer>
 </div>

 <script>
    var resizefunc = [];
</script>
<script>
function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
};

function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

    var urlParams = new URLSearchParams(window.location.search);
    console.log("Does clan page have parameters? ", urlParams.has('clan'));


    console.log("Parameter = ", getUrlParameter('clan'));

    if (urlParams.has('clan') && getUrlParameter('clan') !== ''){

        document.querySelector('#playerSearchBar').style.display = "none";
        document.querySelector('#playerNotFound').style.display = "none";
        document.querySelector('#clanSearchResults').style.display = "none";
        document.querySelector('#playerLoading').style.display = "inline";

        fetch('https://lendingteamutk.herokuapp.com/api/clan?clan=' + getUrlParameter('clan') )

        .then(response => response.json())
        .then(results => {
            console.log("Clan results = ", results);

            document.querySelector('#playerNotFound').style.display = "none";
            document.querySelector('#playerSearchBar').style.display = "none";
            document.querySelector('#playerLoading').style.display = "none";
            

            if (!results.clan_id){
                document.querySelector('#playerNotFound').style.display = "inline";
            }
            else {
                document.querySelector('#clanSearchResults').style.display = "inline";
                document.getElementById('leaderboard-name').innerHTML = `${results.clan_name}`
                document.getElementById('clanXP').innerHTML = `<b>Clan XP:</b> ${numberWithCommas(results.clan_xp)}<br /><b># of Members:</b> ${results.clan.length}<br /><br />`;


                var str = "";
                str += `<table id="leaderboard-table" class="table table-striped table-bordered dt-responsive dataTable no-footer dtr-inline" role="grid" aria-describedby="leaderboard-table-info">
                <tbody>`;

                

                var month = new Array();
                month[0] = "January";
                month[1] = "February";
                month[2] = "March";
                month[3] = "April";
                month[4] = "May";
                month[5] = "June";
                month[6] = "July";
                month[7] = "August";
                month[8] = "September";
                month[9] = "October";
                month[10] = "November";
                month[11] = "December";

                var text = '{ "Leader":0, "Officer":1, "Member":2 }';
                var ranks = JSON.parse(text);

                console.log("Ranks[Officer] = ", ranks['Officer']);

                for (var i = 0; i < results.clan.length; i++){
                    if ((i+1) % 2 == 1){
                        str += '<tr role="row" class="odd">';
                    }
                    else {
                        str += '<tr role="row" class="even">';
                    }

                    var myDate = new Date( results.clan[i].join_date*1000);


                    var timeStr = '';
                    timeStr += `${month[myDate.getMonth()]} ${myDate.getDate()}, ${myDate.getFullYear()} at `;

                    timeStr += (myDate.getHours() == 0 || myDate.getHours() ) > 12 ? `${Math.abs(myDate.getHours()-12)}` : `${myDate.getHours()}`;

                    timeStr += (myDate.getMinutes() < 10) ? `:0${myDate.getMinutes()} `:`:${myDate.getMinutes()} `; 


                    timeStr += (myDate.getHours() == 0 || myDate.getHours() > 12 ) ? `P.M.`:`A.M.`;
                    
                    str += `<td class="sorting_1" tabindex="0"><b><a href="${getPlayerLink(results.clan[i].brawlhalla_id)}" class="waves-effect waves-primary">${results.clan[i].name}</a></b></td>`;
                    str += `<td><b>${numberWithCommas(results.clan[i].xp)}</b></td>`;
                    str += `<td data-order="${results.clan[i].join_date}">${timeStr}</td>`;

                    str += `<td data-order="${ranks[results.clan[i].rank]}">${results.clan[i].rank}</td>`;       
                    str += '</tr>';
                }

                str += '</tbody>';
                str += `<thead>
                        <tr role="row">
                            <th class="sorting_asc" tabindex="0" aria-controls="leaderboard-table" rowspan="1" colspan="1" aria-label="#: activate to sort column descending" style="width: 300px;" aria-sort="ascending">Player
                            </th>

                            <th class="sorting" tabindex="0" aria-controls = "leaderboard-table" rowspan="1" colspan="1" aria-label="Player: activate to sort column ascending" style="width: 50px;">XP</th>

                            <th class="sorting" tabindex="0" aria-controls = "leaderboard-table" rowspan="1" colspan="1" aria-label="Kills: activate to sort column ascending" style="width: 150px;">Join Date</th>

                            <th class="sorting" tabindex="0" aria-controls = "leaderboard-table" rowspan="1" colspan="1" aria-label="Deaths: activate to sort column ascending" style="width: 72px;">Rank</th>

                        
                        </tr>
                    </thead>
                </table>`;

                document.querySelector('#leaderboardClass').innerHTML = '' + str;

                jQuery(document).ready(function ($) {
                $.noConflict();
                $('#leaderboard-table').DataTable();

                });
            }


            

        })
        .catch(err => console.log("Error block in Clans = ", err));
    }
   
</script>


<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.min.js"  type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/bootstrap.min.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/detect.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/fastclick.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.slimscroll.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.blockUI.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/waves.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/wow.min.js"  type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.nicescroll.js"   type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.scrollTo.min.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/switchery/switchery.min.js"    type="text/javascript"></script>

<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.core.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/jquery.app.js"    type="text/javascript"></script>
<script src="https://lendingteamutk.herokuapp.com/assets/js/_main.js"    type="text/javascript"></script>

<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/jquery.dataTables.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/dataTables.bootstrap.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/dataTables.buttons.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/buttons.bootstrap.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/jszip.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/pdfmake.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/vfs_fonts.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/buttons.html5.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/buttons.print.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/dataTables.fixedHeader.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/dataTables.keyTable.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/dataTables.responsive.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/responsive.bootstrap.min.js"  ></script>
<script src="https://lendingteamutk.herokuapp.com/assets/plugins/datatables/dataTables.scroller.min.js"  ></script>



 </div>

 </html>
 